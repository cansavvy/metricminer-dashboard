---
title: "GitHub"
output: html_document
date: "`r format(Sys.time(), '%d %B, %Y')`"
---

## Preview

```{r, echo = FALSE, hide = TRUE, message=FALSE}
root_dir <- rprojroot::find_root(rprojroot::has_dir(".git"))
yaml <- yaml::read_yaml(file.path(root_dir, "_config_automation.yml"))

## For github
github_overall <- readr::read_tsv(file.path("metricminer_data", "github", "github.tsv"))
github_timecourse <- readr::read_tsv(file.path("metricminer_data", "github", "github_timecourse.tsv"))

## For google
# github_overall <- googlesheets4::read_sheet(yaml$github_googlesheet, sheet = "overall_stats")
# github_timecourse <- googlesheets4::read_sheet(yaml$github_googlesheet, sheet = "timecourse")
```


## Data information 

Data information for `github overall data`:

- `num_forks` shows the number of times this repo has been forked. NA means it has never been forked. 
- `num_contributors` how many people have contributed to this repo
- `num_stars` how many people have starred this repo?
- `health_percentage` what percentage of ["good software health" items as described by GitHub](https://docs.github.com/en/communities/setting-up-your-project-for-healthy-contributions/about-community-profiles-for-public-repositories) does this repo have? 

```{r, message=FALSE}
knitr::kable(github_overall)
```

Data information for `github timecourse`:

- `timestampe` shows the date the counts correspond to
- `count_clones` tells the number of clones made on this day 
- `unique_clones` tells how many people did these clones come from?
- `count_views` how many views did the repo get on this day?
- `unique_views` how many people were those views from?

```{r, message=FALSE}
knitr::kable(github_timecourse)
```

### Setting up GitHub

At this point you should already have your GitHub authorization set up for your metricminer dashboard by having [followed the instructions above.](#setting-up-your-dashboard-repository).

In the `_config_automation.yml` you will need to specify items in the GitHub section.
```
###### GitHub ######
refresh-github: yes
github_repos: [ fhdsl/metricminer, fhdsl/metricminer.org ]
github_googlesheet:
```

- [ ] In the `_config_automation.yml` file, make sure that `refresh-github` is set to "yes".
- [ ] In `github_repos` of your `_config_automation.yml`, specify the names of the repositories you'd like to collect data from in `github_repos`. Make sure it includes the `owner/repository` e.g. `fhdsl/metricminer` not just `metricminer`. Commas need to separate the repositories. Delete the example repositories we put there.
- [ ] Optionally, if you are saving data to Google, specify a googlesheet ID in `github_googlesheet` you'd like the GitHub data to be saved to. This will only be relevant if you've set `data_dest` to `google`.
